@extends('layouts.web.dashboard.app')

@section('header_css')
    <style>
        .dataTables_filter {
            display: none;
        }

        .ui-datepicker-calendar {
            display: none;
        }
    </style>
@endsection

@section('content')
    <div class="row">
        <div class="wd-md-rightbar table-rightblog col-md-12">
            <div class="wd-md-topbar d-flex align-items-center justify-content-between">
                <h2>Finance</h2>
                <div class="st-search-box"><span class="search-icon"><img
                            src="{{asset('assets/web/dashboard/images/seach.png')}}" alt=""></span>
                    <input type="text" placeholder="Search Here" id="searchbox">
                </div>
            </div>
            <div class="wd-sl-dashfeatures">
                <div class="wd-sl-gridftrs row">
                    <div class="col-md-2">
                        <a href="#" class="wd-sl-ftrcount kt-iconbox--secondry kt-iconbox--animate-slower">
                            <span>
                                <svg width="30" height="24" viewBox="0 0 30 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M28.4705 9.445C28.2239 9.19805 27.9308 9.00231 27.6083 8.86903C27.2857 8.73576 26.9399 8.66759 26.5909 8.66845H7.4595C6.75738 8.66845 6.08402 8.94736 5.58755 9.44384C5.09108 9.94031 4.81216 10.6137 4.81216 11.3158V14.4308H3.64734C3.32904 14.4308 3.02379 14.3044 2.79872 14.0793C2.57365 13.8542 2.44721 13.549 2.44721 13.2307V3.64734C2.44721 3.32904 2.57365 3.02379 2.79872 2.79872C3.02379 2.57365 3.32904 2.44721 3.64734 2.44721H22.7787C23.0909 2.45639 23.3871 2.58688 23.6046 2.81096C23.8221 3.03504 23.9437 3.33506 23.9436 3.64734V6.51528C23.9436 6.60973 23.9622 6.70325 23.9983 6.79051C24.0345 6.87776 24.0874 6.95705 24.1542 7.02383C24.221 7.09061 24.3003 7.14359 24.3875 7.17973C24.4748 7.21587 24.5683 7.23448 24.6628 7.23448C24.7572 7.23448 24.8507 7.21587 24.938 7.17973C25.0252 7.14359 25.1045 7.09061 25.1713 7.02383C25.2381 6.95705 25.2911 6.87776 25.3272 6.79051C25.3634 6.70325 25.382 6.60973 25.382 6.51528V3.64734C25.382 2.94522 25.103 2.27186 24.6066 1.77539C24.1101 1.27891 23.4367 1 22.7346 1H3.64734C2.94522 1 2.27186 1.27891 1.77539 1.77539C1.27891 2.27186 1 2.94522 1 3.64734L1 13.213C1 13.9152 1.27891 14.5885 1.77539 15.085C2.27186 15.5815 2.94522 15.8604 3.64734 15.8604H5.54459C5.64289 15.8653 5.74114 15.8498 5.83318 15.815C5.92523 15.7801 6.00909 15.7266 6.0795 15.6579C6.14992 15.5891 6.20538 15.5066 6.2424 15.4154C6.27943 15.3242 6.29722 15.2263 6.29467 15.1279V11.307C6.29467 10.9887 6.42111 10.6834 6.64618 10.4583C6.87125 10.2333 7.1765 10.1068 7.4948 10.1068H26.5909C26.9092 10.1068 27.2145 10.2333 27.4395 10.4583C27.6646 10.6834 27.791 10.9887 27.791 11.307V20.8727C27.791 21.191 27.6646 21.4962 27.4395 21.7213C27.2145 21.9463 26.9092 22.0728 26.5909 22.0728H7.4595C7.14736 22.0636 6.8511 21.9331 6.63361 21.709C6.41612 21.485 6.29454 21.1849 6.29467 20.8727V18.9578C6.29467 18.767 6.2189 18.5841 6.08402 18.4492C5.94915 18.3143 5.76622 18.2386 5.57548 18.2386C5.38474 18.2386 5.20181 18.3143 5.06693 18.4492C4.93206 18.5841 4.85629 18.767 4.85629 18.9578V20.8727C4.85629 21.5748 5.1352 22.2481 5.63167 22.7446C6.12814 23.2411 6.8015 23.52 7.50362 23.52H26.5909C27.293 23.52 27.9664 23.2411 28.4629 22.7446C28.9593 22.2481 29.2382 21.5748 29.2382 20.8727V11.307C29.2376 10.6094 28.9617 9.94027 28.4705 9.445V9.445Z"
                                        fill="#ffc107" stroke="#ffc107" stroke-width="0.5"></path>
                                    <path
                                        d="M25.6467 19.6814H23.7318C23.541 19.6814 23.3581 19.6056 23.2232 19.4707C23.0883 19.3359 23.0126 19.1529 23.0126 18.9622C23.0126 18.7715 23.0883 18.5885 23.2232 18.4537C23.3581 18.3188 23.541 18.243 23.7318 18.243H25.6467C25.8374 18.243 26.0203 18.3188 26.1552 18.4537C26.2901 18.5885 26.3659 18.7715 26.3659 18.9622C26.3659 19.1529 26.2901 19.3359 26.1552 19.4707C26.0203 19.6056 25.8374 19.6814 25.6467 19.6814V19.6814ZM17.034 19.6814C16.3237 19.6814 15.6293 19.4708 15.0386 19.0761C14.448 18.6815 13.9877 18.1205 13.7158 17.4643C13.444 16.808 13.3729 16.0859 13.5115 15.3892C13.65 14.6925 13.9921 14.0525 14.4944 13.5502C14.9967 13.0479 15.6366 12.7059 16.3333 12.5673C17.03 12.4287 17.7522 12.4998 18.4084 12.7717C19.0647 13.0435 19.6256 13.5039 20.0203 14.0945C20.4149 14.6851 20.6256 15.3795 20.6256 16.0898C20.6256 17.0424 20.2472 17.9559 19.5736 18.6295C18.9001 19.303 17.9865 19.6814 17.034 19.6814V19.6814ZM17.034 13.9367C16.6081 13.9367 16.1919 14.063 15.8378 14.2996C15.4837 14.5361 15.2077 14.8724 15.0447 15.2659C14.8818 15.6593 14.8391 16.0922 14.9222 16.5099C15.0053 16.9276 15.2104 17.3112 15.5115 17.6124C15.8126 17.9135 16.1963 18.1186 16.6139 18.2016C17.0316 18.2847 17.4645 18.2421 17.858 18.0791C18.2514 17.9161 18.5877 17.6402 18.8243 17.2861C19.0609 16.932 19.1872 16.5157 19.1872 16.0898C19.1872 15.5188 18.9603 14.9711 18.5565 14.5673C18.1527 14.1635 17.6051 13.9367 17.034 13.9367V13.9367ZM10.3362 13.9367H8.42134C8.2306 13.9367 8.04767 13.8609 7.9128 13.726C7.77792 13.5912 7.70215 13.4082 7.70215 13.2175C7.70215 13.0267 7.77792 12.8438 7.9128 12.7089C8.04767 12.5741 8.2306 12.4983 8.42134 12.4983H10.3362C10.527 12.4983 10.7099 12.5741 10.8448 12.7089C10.9797 12.8438 11.0554 13.0267 11.0554 13.2175C11.0554 13.4082 10.9797 13.5912 10.8448 13.726C10.7099 13.8609 10.527 13.9367 10.3362 13.9367V13.9367Z"
                                        fill="#ffc107"></path>
                                </svg>
                            </span>
                            <div class="wd-sl-textcounter">
                                <h3>{{$total_no_enquiry}}</h3>
                                <h6>Total No.Enquiries</h6>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href="#" class="wd-sl-ftrcount kt-iconbox--success kt-iconbox--animate-slower">
                            <span>
                                <svg width="30" height="24" viewBox="0 0 30 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M28.4705 9.445C28.2239 9.19805 27.9308 9.00231 27.6083 8.86903C27.2857 8.73576 26.9399 8.66759 26.5909 8.66845H7.4595C6.75738 8.66845 6.08402 8.94736 5.58755 9.44384C5.09108 9.94031 4.81216 10.6137 4.81216 11.3158V14.4308H3.64734C3.32904 14.4308 3.02379 14.3044 2.79872 14.0793C2.57365 13.8542 2.44721 13.549 2.44721 13.2307V3.64734C2.44721 3.32904 2.57365 3.02379 2.79872 2.79872C3.02379 2.57365 3.32904 2.44721 3.64734 2.44721H22.7787C23.0909 2.45639 23.3871 2.58688 23.6046 2.81096C23.8221 3.03504 23.9437 3.33506 23.9436 3.64734V6.51528C23.9436 6.60973 23.9622 6.70325 23.9983 6.79051C24.0345 6.87776 24.0874 6.95705 24.1542 7.02383C24.221 7.09061 24.3003 7.14359 24.3875 7.17973C24.4748 7.21587 24.5683 7.23448 24.6628 7.23448C24.7572 7.23448 24.8507 7.21587 24.938 7.17973C25.0252 7.14359 25.1045 7.09061 25.1713 7.02383C25.2381 6.95705 25.2911 6.87776 25.3272 6.79051C25.3634 6.70325 25.382 6.60973 25.382 6.51528V3.64734C25.382 2.94522 25.103 2.27186 24.6066 1.77539C24.1101 1.27891 23.4367 1 22.7346 1H3.64734C2.94522 1 2.27186 1.27891 1.77539 1.77539C1.27891 2.27186 1 2.94522 1 3.64734L1 13.213C1 13.9152 1.27891 14.5885 1.77539 15.085C2.27186 15.5815 2.94522 15.8604 3.64734 15.8604H5.54459C5.64289 15.8653 5.74114 15.8498 5.83318 15.815C5.92523 15.7801 6.00909 15.7266 6.0795 15.6579C6.14992 15.5891 6.20538 15.5066 6.2424 15.4154C6.27943 15.3242 6.29722 15.2263 6.29467 15.1279V11.307C6.29467 10.9887 6.42111 10.6834 6.64618 10.4583C6.87125 10.2333 7.1765 10.1068 7.4948 10.1068H26.5909C26.9092 10.1068 27.2145 10.2333 27.4395 10.4583C27.6646 10.6834 27.791 10.9887 27.791 11.307V20.8727C27.791 21.191 27.6646 21.4962 27.4395 21.7213C27.2145 21.9463 26.9092 22.0728 26.5909 22.0728H7.4595C7.14736 22.0636 6.8511 21.9331 6.63361 21.709C6.41612 21.485 6.29454 21.1849 6.29467 20.8727V18.9578C6.29467 18.767 6.2189 18.5841 6.08402 18.4492C5.94915 18.3143 5.76622 18.2386 5.57548 18.2386C5.38474 18.2386 5.20181 18.3143 5.06693 18.4492C4.93206 18.5841 4.85629 18.767 4.85629 18.9578V20.8727C4.85629 21.5748 5.1352 22.2481 5.63167 22.7446C6.12814 23.2411 6.8015 23.52 7.50362 23.52H26.5909C27.293 23.52 27.9664 23.2411 28.4629 22.7446C28.9593 22.2481 29.2382 21.5748 29.2382 20.8727V11.307C29.2376 10.6094 28.9617 9.94027 28.4705 9.445V9.445Z"
                                        fill="#78d12a" stroke="#78d12a" stroke-width="0.5"></path>
                                    <path
                                        d="M25.6467 19.6814H23.7318C23.541 19.6814 23.3581 19.6056 23.2232 19.4707C23.0883 19.3359 23.0126 19.1529 23.0126 18.9622C23.0126 18.7715 23.0883 18.5885 23.2232 18.4537C23.3581 18.3188 23.541 18.243 23.7318 18.243H25.6467C25.8374 18.243 26.0203 18.3188 26.1552 18.4537C26.2901 18.5885 26.3659 18.7715 26.3659 18.9622C26.3659 19.1529 26.2901 19.3359 26.1552 19.4707C26.0203 19.6056 25.8374 19.6814 25.6467 19.6814V19.6814ZM17.034 19.6814C16.3237 19.6814 15.6293 19.4708 15.0386 19.0761C14.448 18.6815 13.9877 18.1205 13.7158 17.4643C13.444 16.808 13.3729 16.0859 13.5115 15.3892C13.65 14.6925 13.9921 14.0525 14.4944 13.5502C14.9967 13.0479 15.6366 12.7059 16.3333 12.5673C17.03 12.4287 17.7522 12.4998 18.4084 12.7717C19.0647 13.0435 19.6256 13.5039 20.0203 14.0945C20.4149 14.6851 20.6256 15.3795 20.6256 16.0898C20.6256 17.0424 20.2472 17.9559 19.5736 18.6295C18.9001 19.303 17.9865 19.6814 17.034 19.6814V19.6814ZM17.034 13.9367C16.6081 13.9367 16.1919 14.063 15.8378 14.2996C15.4837 14.5361 15.2077 14.8724 15.0447 15.2659C14.8818 15.6593 14.8391 16.0922 14.9222 16.5099C15.0053 16.9276 15.2104 17.3112 15.5115 17.6124C15.8126 17.9135 16.1963 18.1186 16.6139 18.2016C17.0316 18.2847 17.4645 18.2421 17.858 18.0791C18.2514 17.9161 18.5877 17.6402 18.8243 17.2861C19.0609 16.932 19.1872 16.5157 19.1872 16.0898C19.1872 15.5188 18.9603 14.9711 18.5565 14.5673C18.1527 14.1635 17.6051 13.9367 17.034 13.9367V13.9367ZM10.3362 13.9367H8.42134C8.2306 13.9367 8.04767 13.8609 7.9128 13.726C7.77792 13.5912 7.70215 13.4082 7.70215 13.2175C7.70215 13.0267 7.77792 12.8438 7.9128 12.7089C8.04767 12.5741 8.2306 12.4983 8.42134 12.4983H10.3362C10.527 12.4983 10.7099 12.5741 10.8448 12.7089C10.9797 12.8438 11.0554 13.0267 11.0554 13.2175C11.0554 13.4082 10.9797 13.5912 10.8448 13.726C10.7099 13.8609 10.527 13.9367 10.3362 13.9367V13.9367Z"
                                        fill="#78d12a"></path>
                                </svg>
                            </span>
                            <div class="wd-sl-textcounter">
                                <h3>{{$total_no_approved}}</h3>
                                <h6>No.Approved Enquiries</h6>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a href="#" class="wd-sl-ftrcount kt-iconbox--brand kt-iconbox--animate-slower">
                            <span>
                                <svg width="30" height="24" viewBox="0 0 30 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M28.4705 9.445C28.2239 9.19805 27.9308 9.00231 27.6083 8.86903C27.2857 8.73576 26.9399 8.66759 26.5909 8.66845H7.4595C6.75738 8.66845 6.08402 8.94736 5.58755 9.44384C5.09108 9.94031 4.81216 10.6137 4.81216 11.3158V14.4308H3.64734C3.32904 14.4308 3.02379 14.3044 2.79872 14.0793C2.57365 13.8542 2.44721 13.549 2.44721 13.2307V3.64734C2.44721 3.32904 2.57365 3.02379 2.79872 2.79872C3.02379 2.57365 3.32904 2.44721 3.64734 2.44721H22.7787C23.0909 2.45639 23.3871 2.58688 23.6046 2.81096C23.8221 3.03504 23.9437 3.33506 23.9436 3.64734V6.51528C23.9436 6.60973 23.9622 6.70325 23.9983 6.79051C24.0345 6.87776 24.0874 6.95705 24.1542 7.02383C24.221 7.09061 24.3003 7.14359 24.3875 7.17973C24.4748 7.21587 24.5683 7.23448 24.6628 7.23448C24.7572 7.23448 24.8507 7.21587 24.938 7.17973C25.0252 7.14359 25.1045 7.09061 25.1713 7.02383C25.2381 6.95705 25.2911 6.87776 25.3272 6.79051C25.3634 6.70325 25.382 6.60973 25.382 6.51528V3.64734C25.382 2.94522 25.103 2.27186 24.6066 1.77539C24.1101 1.27891 23.4367 1 22.7346 1H3.64734C2.94522 1 2.27186 1.27891 1.77539 1.77539C1.27891 2.27186 1 2.94522 1 3.64734L1 13.213C1 13.9152 1.27891 14.5885 1.77539 15.085C2.27186 15.5815 2.94522 15.8604 3.64734 15.8604H5.54459C5.64289 15.8653 5.74114 15.8498 5.83318 15.815C5.92523 15.7801 6.00909 15.7266 6.0795 15.6579C6.14992 15.5891 6.20538 15.5066 6.2424 15.4154C6.27943 15.3242 6.29722 15.2263 6.29467 15.1279V11.307C6.29467 10.9887 6.42111 10.6834 6.64618 10.4583C6.87125 10.2333 7.1765 10.1068 7.4948 10.1068H26.5909C26.9092 10.1068 27.2145 10.2333 27.4395 10.4583C27.6646 10.6834 27.791 10.9887 27.791 11.307V20.8727C27.791 21.191 27.6646 21.4962 27.4395 21.7213C27.2145 21.9463 26.9092 22.0728 26.5909 22.0728H7.4595C7.14736 22.0636 6.8511 21.9331 6.63361 21.709C6.41612 21.485 6.29454 21.1849 6.29467 20.8727V18.9578C6.29467 18.767 6.2189 18.5841 6.08402 18.4492C5.94915 18.3143 5.76622 18.2386 5.57548 18.2386C5.38474 18.2386 5.20181 18.3143 5.06693 18.4492C4.93206 18.5841 4.85629 18.767 4.85629 18.9578V20.8727C4.85629 21.5748 5.1352 22.2481 5.63167 22.7446C6.12814 23.2411 6.8015 23.52 7.50362 23.52H26.5909C27.293 23.52 27.9664 23.2411 28.4629 22.7446C28.9593 22.2481 29.2382 21.5748 29.2382 20.8727V11.307C29.2376 10.6094 28.9617 9.94027 28.4705 9.445V9.445Z"
                                        fill="#0aacdd" stroke="#0aacdd" stroke-width="0.5"></path>
                                    <path
                                        d="M25.6467 19.6814H23.7318C23.541 19.6814 23.3581 19.6056 23.2232 19.4707C23.0883 19.3359 23.0126 19.1529 23.0126 18.9622C23.0126 18.7715 23.0883 18.5885 23.2232 18.4537C23.3581 18.3188 23.541 18.243 23.7318 18.243H25.6467C25.8374 18.243 26.0203 18.3188 26.1552 18.4537C26.2901 18.5885 26.3659 18.7715 26.3659 18.9622C26.3659 19.1529 26.2901 19.3359 26.1552 19.4707C26.0203 19.6056 25.8374 19.6814 25.6467 19.6814V19.6814ZM17.034 19.6814C16.3237 19.6814 15.6293 19.4708 15.0386 19.0761C14.448 18.6815 13.9877 18.1205 13.7158 17.4643C13.444 16.808 13.3729 16.0859 13.5115 15.3892C13.65 14.6925 13.9921 14.0525 14.4944 13.5502C14.9967 13.0479 15.6366 12.7059 16.3333 12.5673C17.03 12.4287 17.7522 12.4998 18.4084 12.7717C19.0647 13.0435 19.6256 13.5039 20.0203 14.0945C20.4149 14.6851 20.6256 15.3795 20.6256 16.0898C20.6256 17.0424 20.2472 17.9559 19.5736 18.6295C18.9001 19.303 17.9865 19.6814 17.034 19.6814V19.6814ZM17.034 13.9367C16.6081 13.9367 16.1919 14.063 15.8378 14.2996C15.4837 14.5361 15.2077 14.8724 15.0447 15.2659C14.8818 15.6593 14.8391 16.0922 14.9222 16.5099C15.0053 16.9276 15.2104 17.3112 15.5115 17.6124C15.8126 17.9135 16.1963 18.1186 16.6139 18.2016C17.0316 18.2847 17.4645 18.2421 17.858 18.0791C18.2514 17.9161 18.5877 17.6402 18.8243 17.2861C19.0609 16.932 19.1872 16.5157 19.1872 16.0898C19.1872 15.5188 18.9603 14.9711 18.5565 14.5673C18.1527 14.1635 17.6051 13.9367 17.034 13.9367V13.9367ZM10.3362 13.9367H8.42134C8.2306 13.9367 8.04767 13.8609 7.9128 13.726C7.77792 13.5912 7.70215 13.4082 7.70215 13.2175C7.70215 13.0267 7.77792 12.8438 7.9128 12.7089C8.04767 12.5741 8.2306 12.4983 8.42134 12.4983H10.3362C10.527 12.4983 10.7099 12.5741 10.8448 12.7089C10.9797 12.8438 11.0554 13.0267 11.0554 13.2175C11.0554 13.4082 10.9797 13.5912 10.8448 13.726C10.7099 13.8609 10.527 13.9367 10.3362 13.9367V13.9367Z"
                                        fill="#0aacdd"></path>
                                </svg>
                            </span>
                            <div class="wd-sl-textcounter">
                                <h3>{{$total_no_declined}}</h3>
                                <h6>No.Declined Enquiries</h6>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="wd-md-bottom wd-md-table">
                <div class="table-responsive">
                    <table class="table table-striped" id="customerDataBaseTable">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Vehicle Number</th>
                            <th>Vehicle Make/Model</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
@endsection

@section('footer_script')
    <script>
        let dataTable = $('#customerDataBaseTable').DataTable({
            "processing": true,
            "serverSide": true,
            "responsive": true,
            "scrollX": true,
            "order": [[0, "DESC"]],
            "bLengthChange": false,
            "ajax": {
                url: "{{route('front.finance.listing')}}"
            },
            "language": {
                "paginate": {
                    "previous": "<",
                    "next": ">"
                },
                "search": '',
                "searchPlaceholder": 'Search Here',
            },
            "fnInfoCallback": function (oSettings, iStart, iEnd, iMax, iTotal, sPre) {
                return "Showing <span>" + iStart + " - " + iEnd + "</span> from <span>" + iMax + "</span>";
            },
            "columns": [
                {"data": "id"},
                {"data": "name"},
                {"data": "email"},
                {"data": "number"},
                {"data": "make_model"},
                {"data": "status"},
                {"data": "action"},
            ]
        });
        $("#searchbox").keyup(function () {
            dataTable.search(this.value).draw();
        });

        function get_contacted_broker_form(id) {
            $.ajax({
                type: 'get',
                data: {'id': id},
                url: "{{route('front.finance.get_contacted_broker_form')}}",
                beforeSend: addOverlay,
                success: function (r) {
                    removeOverlay();
                    if (r.status == 200) {
                        toastr['success'](r.message, "success");
                        dataTable.draw();
                    } else {
                        toastr['error'](r.message, "error");
                    }
                }
            })
        }

        function get_completed_form(id) {
            $.ajax({
                type: 'get',
                data: {'id': id},
                url: "{{route('front.finance.get_completed_form')}}",
                beforeSend: addOverlay,
                success: function (r) {
                    removeOverlay();
                    if (r.status == 200) {
                        toastr['success'](r.message, "success");
                        dataTable.draw();
                    } else {
                        toastr['error'](r.message, "error");
                    }
                }
            })
        }
    </script>
@endsection
